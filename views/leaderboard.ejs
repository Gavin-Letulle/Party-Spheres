<%- include('./partials/header', { currentPage: 'leaderboard' }) %>

<div class="content">
    <div class="leaderboard">
        <h2>Top 10 Players</h2>
        <table class="leaderboard-table">
            <thead>
                <tr>
                    <th>Rank</th>
                    <th style="text-align: left; padding-left: 20px;">Name</th>
                    <th>Points</th>
                </tr>
            </thead>
            <tbody>
                <% if (users.length > 0) { %>
                    <% users.forEach((user, index) => { %>
                        <tr class="clickable-row" data-user-id="<%= user.user_id %>">
                            <td><%= index + 1 %></td>
                            <td class="player-info">
                                <img src="<%= user.img_path %>" 
                                     alt="Profile Picture" class="leaderboard-profile">
                                <span><%= user.username %></span>
                            </td>
                            <td><%= user.high_score %></td>
                        </tr>
                    <% }) %>
                <% } else { %>
                    <tr>
                        <td colspan="3" style="text-align: center;">No players found</td>
                    </tr>
                <% } %>
            </tbody>
        </table>
    </div>
</div>

<script>
    // Make the entire row clickable and redirect to the user profile
    document.querySelectorAll('.clickable-row').forEach(row => {
        row.addEventListener('click', function() {
            const userId = this.getAttribute('data-user-id');
            window.location.href = `/profile/${userId}`;
        });
    });
</script>

<%- include('./partials/footer') %>